project(w3m)
cmake_minimum_required(VERSION 3.0.0)
   
add_executable(mktable
    src/mktable.c
    src/Str.c
    src/myctype.c
    src/hash.c
)
target_include_directories(mktable
PRIVATE
    ${CMAKE_CURRENT_LIST_DIR}/src
)
target_compile_definitions(mktable
PRIVATE
    HAVE_CONFIG_H
)
target_link_libraries(mktable
PRIVATE
    dl
    m
    gc    
)

add_executable(w3m
    src/main.cpp
    src/dispatcher.cpp
    src/defun.c
    src/public.c
    libwc/big5.c
    libwc/ces.c
    libwc/char_conv.c
    libwc/charset.c
    libwc/combining.c
    libwc/conv.c
    libwc/detect.c
    libwc/gb18030.c
    libwc/gbk.c
    libwc/hkscs.c
    libwc/hz.c
    libwc/iso2022.c
    libwc/jis.c
    libwc/johab.c
    libwc/priv.c
    libwc/putc.c
    libwc/search.c
    libwc/sjis.c
    libwc/status.c
    libwc/ucs.c
    libwc/uhc.c
    libwc/utf7.c
    libwc/utf8.c
    libwc/viet.c
    libwc/wtf.c
    src/Str.c
    src/indep.c
    src/regex.c
    src/textlist.c
    src/parsetag.c
    src/myctype.c
    src/hash.c
    src/file.c
    src/buffer.c
    src/display.c
    src/etc.c
    src/search.c
    src/linein.c
    src/table.c
    src/local.c
    src/form.c
    src/map.c
    src/frame.c
    src/rc.c
    src/menu.c
    src/mailcap.c
    src/image.c
    src/symbol.c
    src/entity.c
    src/terms.c
    src/url.c
    src/ftp.c
    src/mimehead.c
    src/regex.c
    src/news.c
    src/func.c
    src/cookie.c
    src/history.c
    src/backend.c
    src/indep.c
    src/version.c
    src/istream.c
    src/keybind.c
    src/parsetagx.c
    src/anchor.c
    src/tagtable.c
)
target_include_directories(w3m
PUBLIC
    ${CMAKE_CURRENT_LIST_DIR}/libwc
    ${CMAKE_CURRENT_LIST_DIR}/src
    )
target_compile_definitions(w3m
PUBLIC
    HAVE_CONFIG_H
    AUXBIN_DIR=\"/usr/local/w3m/libexec\"
    CGIBIN_DIR=\"/usr/local/w3m/cgi-bin\"
    HELP_DIR=\"/usr/local/share/w3m\"
    ETC_DIR=\"/usr/local/etc\"
    CONF_DIR=\"/usr/local/etc/w3m\"
    RC_DIR=\"~/.w3m\"
    LOCALEDIR=\"/usr/local/share/locale\"
    USE_UNICODE
    )
target_compile_options(w3m
PRIVATE
    -Werror=implicit-function-declaration
    -Werror=int-conversion
    )
target_link_libraries(w3m
PRIVATE
    m
    gc
    ncurses
    ssl
    crypto
    )
